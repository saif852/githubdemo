module "caller_identities" {
  source = "./caller_identity_module"

  aws_contexts = {
    account1 = {
      profile = "profile1"
      region  = "us-west-1"
    }
    account2 = {
      profile = "profile2"
      region  = "us-west-2"
    }
  }
}

module "caller_identities" {
  source = "./caller_identity_module"

  aws_contexts = {
    account1 = {
      profile   = "profile1"
      region    = "us-west-1"
      role_arn  = "arn:aws:iam::ACCOUNT_ID:role/ROLE_NAME"
    }
    account2 = {
      profile   = "profile2"
      region    = "us-west-2"
      role_arn  = "arn:aws:iam::ACCOUNT_ID:role/ROLE_NAME"
    }
  }
}

module "caller_identities" {
  source = "./caller_identity_module"

  target_admin_role_arn = "arn:aws:iam::ACCOUNT_ID:role/ROLE_NAME"

  aws_contexts = {
    account1 = {
      profile   = "profile1"
      region    = "us-west-1"
      role_arn  = var.target_admin_role_arn
    }
    account2 = {
      profile   = "profile2"
      region    = "us-west-2"
      role_arn  = var.target_admin_role_arn
    }
  }
}
module "caller_identity_1" {
  source = "./caller_identity_module"
  provider_config = {
    alias   = "account1"
    profile = "profile1"
    region  = "us-west-1"
  }
}

module "caller_identity_2" {
  source = "./caller_identity_module"
  provider_config = {
    alias   = "account2"
    profile = "profile2"
    region  = "us-west-2"
  }
}

output "caller_identity_account1" {
  value = module.caller_identity_1.data.aws_caller_identity.current
}

output "caller_identity_account2" {
  value = module.caller_identity_2.data.aws_caller_identity.current
}


